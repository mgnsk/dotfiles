---
apiVersion: v1
kind: Pod
metadata:
  labels:
    app: toolbox
  name: toolbox_pod
spec:
  containers:
    - image: toolbox
      imagePullPolicy: always
      name: toolbox
      # ports:
      #   - containerPort: 6060
      #     hostPort: 6060
      #     protocol: TCP
      env:
        - name: TERM
          value: ${TERM}
      resources: {}
      securityContext:
        allowPrivilegeEscalation: false
        privileged: false
        seLinuxOptions:
          type: spc_t
      tty: true
      stdin: true
      workingDir: /workspaces
      volumeMounts:
        - name: toolbox-workspaces
          mountPath: /workspaces
        - name: toolbox-cache
          mountPath: "${HOME}/.cache"
        - name: toolbox-nvim-data
          mountPath: "${HOME}/.local/share/nvim"
        - name: toolbox-go-data
          mountPath: "${HOME}/go"
        - name: toolbox-cargo-data
          mountPath: "${HOME}/.cargo"
        - name: toolbox-local-bin
          mountPath: "${HOME}/.local/bin"
        - name: toolbox-local-lib
          mountPath: "${HOME}/.local/lib"
  restartPolicy: Never
  volumes:
    - name: toolbox-workspaces
      hostPath:
        path: "${WORKSPACES_HOST_PATH}"
        type: Directory

    - name: toolbox-cache
      persistentVolumeClaim:
        claimName: toolbox-cache

    - name: toolbox-nvim-data
      persistentVolumeClaim:
        claimName: toolbox-nvim-data

    - name: toolbox-go-data
      persistentVolumeClaim:
        claimName: toolbox-go-data

    - name: toolbox-cargo-data
      persistentVolumeClaim:
        claimName: toolbox-cargo-data

    - name: toolbox-local-bin
      persistentVolumeClaim:
        claimName: toolbox-local-bin

    - name: toolbox-local-lib
      persistentVolumeClaim:
        claimName: toolbox-local-lib
status: {}
